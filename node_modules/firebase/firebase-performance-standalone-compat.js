!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).firebase=e()}(this,(function(){"use strict";var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};var e=function(){return(e=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function n(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))}function r(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function i(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function o(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function a(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}function s(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=s(t[n],e[n]));return t}var c=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();var u=function(e){function n(t,r,i){var o=e.call(this,r)||this;return o.code=t,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,l.prototype.create),o}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}(n,e),n}(Error),l=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?p(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",c=new u(i,s,r);return c},t}();function p(t,e){return t.replace(f,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var f=/\{\$([^}]+)}/g;var d=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),h="[DEFAULT]",m=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Set}return t.prototype.get=function(t){void 0===t&&(t=h);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new c;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var n=e({identifier:h,optional:!1},t),r=n.identifier,i=n.optional,o=this.normalizeInstanceIdentifier(r);if(!this.isInitialized(o)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:o})}catch(t){if(i)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:h})}catch(t){}try{for(var r=i(this.instancesDeferred.entries()),a=r.next();!a.done;a=r.next()){var s=o(a.value,2),c=s[0],u=s[1],l=this.normalizeInstanceIdentifier(c);try{var p=this.getOrInitializeService({instanceIdentifier:l});u.resolve(p)}catch(t){}}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=h),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return n(this,void 0,void 0,(function(){var t;return r(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(a(a([],o(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),o(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=h),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var r=t.instanceIdentifier,a=void 0===r?h:r,s=t.options,c=void 0===s?{}:s,u=this.normalizeInstanceIdentifier(a);if(this.isInitialized(u))throw Error(this.name+"("+u+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var l=this.getOrInitializeService({instanceIdentifier:u,options:c});try{for(var p=i(this.instancesDeferred.entries()),f=p.next();!f.done;f=p.next()){var d=o(f.value,2),m=d[0],g=d[1];u===this.normalizeInstanceIdentifier(m)&&g.resolve(l)}}catch(t){e={error:t}}finally{try{f&&!f.done&&(n=p.return)&&n.call(p)}finally{if(e)throw e.error}}return this.invokeOnInitCallbacks(l,u),l},t.prototype.onInit=function(t){var e=this;return this.onInitCallbacks.add(t),function(){e.onInitCallbacks.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,r;try{for(var o=i(this.onInitCallbacks),a=o.next();!a.done;a=o.next()){var s=a.value;try{s(t,e)}catch(t){}}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===h?void 0:e),options:i}),this.instances.set(n,o),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(t){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:h:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}();var g,v,y=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new m(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}(),b=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(v||(v={}));var w={debug:v.DEBUG,verbose:v.VERBOSE,info:v.INFO,warn:v.WARN,error:v.ERROR,silent:v.SILENT},_=v.INFO,I=((g={})[v.DEBUG]="log",g[v.VERBOSE]="log",g[v.INFO]="info",g[v.WARN]="warn",g[v.ERROR]="error",g),E=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=I[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,a(["["+i+"]  "+t.name+":"],n))}},S=function(){function t(t){this.name=t,this._logLevel=_,this._logHandler=E,this._userLogHandler=null,b.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in v))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?w[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,a([this,v.DEBUG],t)),this._logHandler.apply(this,a([this,v.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,a([this,v.VERBOSE],t)),this._logHandler.apply(this,a([this,v.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,a([this,v.INFO],t)),this._logHandler.apply(this,a([this,v.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,a([this,v.WARN],t)),this._logHandler.apply(this,a([this,v.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,a([this,v.ERROR],t)),this._logHandler.apply(this,a([this,v.ERROR],t))},t}();class T{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const C="@firebase/app-exp",A=new S("@firebase/app"),N="[DEFAULT]",O={[C]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics-exp":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/auth-exp":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions-exp":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations-exp":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging-exp":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance-exp":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config-exp":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js","firebase-exp":"fire-js-all"},k=new Map,P=new Map;function D(t,e){try{t.container.addComponent(e)}catch(n){A.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function R(t){const e=t.name;if(P.has(e))return A.debug(`There were multiple attempts to register component ${e}.`),!1;P.set(e,t);for(const e of k.values())D(e,t);return!0}function x(t,e){return t.container.getProvider(e)}const L=new l("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class j{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new d("app-exp",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw L.create("app-deleted",{appName:this._name})}}const M="9.0.0-beta.2";function B(t,e={}){if("object"!=typeof e){e={name:e}}const n=Object.assign({name:N,automaticDataCollectionEnabled:!1},e),r=n.name;if("string"!=typeof r||!r)throw L.create("bad-app-name",{appName:String(r)});if(k.has(r))throw L.create("duplicate-app",{appName:r});const i=new y(r);for(const t of P.values())i.addComponent(t);const o=new j(t,n,i);return k.set(r,o),o}async function F(t){const e=t.name;k.has(e)&&(k.delete(e),await Promise.all(t.container.getProviders().map((t=>t.delete()))),t.isDeleted=!0)}function U(t,e,n){var r;let i=null!==(r=O[t])&&void 0!==r?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const t=[`Unable to register library "${i}" with version "${e}":`];return o&&t.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&t.push("and"),a&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void A.warn(t.join(" "))}R(new d(`${i}-version`,(()=>({library:i,version:e})),"VERSION"))}function $(t,e){if(null!==t&&"function"!=typeof t)throw L.create("invalid-log-argument");!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=w[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:v[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=b;r<i.length;r++)n(i[r])}(t,e)}function q(t){var e;e=t,b.forEach((function(t){t.setLogLevel(e)}))}var z;R(new d("platform-logger",(t=>new T(t)),"PRIVATE")),U(C,"0.0.900-exp.d92a36260",z),U("fire-js","");var V=Object.freeze({__proto__:null,SDK_VERSION:M,_DEFAULT_ENTRY_NAME:N,_addComponent:D,_addOrOverwriteComponent:function(t,e){t.container.addOrOverwriteComponent(e)},_apps:k,_clearComponents:function(){P.clear()},_components:P,_getProvider:x,_registerComponent:R,_removeServiceInstance:function(t,e,n="[DEFAULT]"){x(t,e).clearInstance(n)},deleteApp:F,getApp:function(t="[DEFAULT]"){const e=k.get(t);if(!e)throw L.create("no-app",{appName:t});return e},getApps:function(){return Array.from(k.values())},initializeApp:B,onLog:$,registerVersion:U,setLogLevel:q});class H{constructor(t,e){this._delegate=t,this.firebase=e,D(t,new d("app-compat",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.automaticDataCollectionEnabled=t}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return this.firebase.INTERNAL.removeApp(this.name),F(this._delegate)}_getService(t,e="[DEFAULT]"){return this._delegate.checkDestroyed(),this._delegate.container.getProvider(t).getImmediate({identifier:e})}}const K=new l("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});function W(t){const e={},n={__esModule:!0,initializeApp:function(r,i={}){const o=B(r,i),a=new t(o,n);return e[o.name]=a,a},app:r,registerVersion:U,setLogLevel:q,onLog:$,apps:null,SDK_VERSION:M,INTERNAL:{registerComponent:function(e){const i=e.name,o=i.replace("-compat","");if(R(e)&&"PUBLIC"===e.type){const a=(t=r())=>{if("function"!=typeof t[o])throw K.create("invalid-app-argument",{appName:i});return t[o]()};void 0!==e.serviceProps&&s(a,e.serviceProps),n[o]=a,t.prototype[o]=function(...t){return this._getService.bind(this,i).apply(this,e.multipleInstances?t:[])}}return"PUBLIC"===e.type?n[o]:null},removeApp:function(t){delete e[t]},useAsService:function(t,e){if("serverAuth"===e)return null;return e},modularAPIs:V}};function r(t){if(n=e,r=t=t||N,!Object.prototype.hasOwnProperty.call(n,r))throw K.create("no-app",{appName:t});var n,r;return e[t]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(e).map((t=>e[t]))}}),r.App=t,n}const G=function(){const t=W(H);t.SDK_VERSION=`${t.SDK_VERSION}_LITE`;const e=t.INTERNAL.registerComponent;return t.INTERNAL.registerComponent=function(t){if("PUBLIC"===t.type&&!t.name.includes("performance")&&!t.name.includes("installations"))throw Error(`${name} cannot register with the standalone perf instance`);return e(t)},t}();!function(t){U("@firebase/app-compat","0.0.900-exp.d92a36260",t)}("lite");function J(t){return Array.prototype.slice.call(t)}function Y(t){return new Promise((function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function X(t,e,n){var r,i=new Promise((function(i,o){Y(r=t[e].apply(t,n)).then(i,o)}));return i.request=r,i}function Z(t,e,n){var r=X(t,e,n);return r.then((function(t){if(t)return new it(t,r.request)}))}function Q(t,e,n){n.forEach((function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})}))}function tt(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return X(this[e],r,arguments)})}))}function et(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})}))}function nt(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return Z(this[e],r,arguments)})}))}function rt(t){this._index=t}function it(t,e){this._cursor=t,this._request=e}function ot(t){this._store=t}function at(t){this._tx=t,this.complete=new Promise((function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}}))}function st(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new at(n)}function ct(t){this._db=t}G.registerVersion("firebase-exp","9.0.0-beta.2","app-compat"),Q(rt,"_index",["name","keyPath","multiEntry","unique"]),tt(rt,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),nt(rt,"_index",IDBIndex,["openCursor","openKeyCursor"]),Q(it,"_cursor",["direction","key","primaryKey","value"]),tt(it,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(t){t in IDBCursor.prototype&&(it.prototype[t]=function(){var e=this,n=arguments;return Promise.resolve().then((function(){return e._cursor[t].apply(e._cursor,n),Y(e._request).then((function(t){if(t)return new it(t,e._request)}))}))})})),ot.prototype.createIndex=function(){return new rt(this._store.createIndex.apply(this._store,arguments))},ot.prototype.index=function(){return new rt(this._store.index.apply(this._store,arguments))},Q(ot,"_store",["name","keyPath","indexNames","autoIncrement"]),tt(ot,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),nt(ot,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),et(ot,"_store",IDBObjectStore,["deleteIndex"]),at.prototype.objectStore=function(){return new ot(this._tx.objectStore.apply(this._tx,arguments))},Q(at,"_tx",["objectStoreNames","mode"]),et(at,"_tx",IDBTransaction,["abort"]),st.prototype.createObjectStore=function(){return new ot(this._db.createObjectStore.apply(this._db,arguments))},Q(st,"_db",["name","version","objectStoreNames"]),et(st,"_db",IDBDatabase,["deleteObjectStore","close"]),ct.prototype.transaction=function(){return new at(this._db.transaction.apply(this._db,arguments))},Q(ct,"_db",["name","version","objectStoreNames"]),et(ct,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(t){[ot,rt].forEach((function(e){t in e.prototype&&(e.prototype[t.replace("open","iterate")]=function(){var e=J(arguments),n=e[e.length-1],r=this._store||this._index,i=r[t].apply(r,e.slice(0,-1));i.onsuccess=function(){n(i.result)}})}))})),[rt,ot].forEach((function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise((function(i){n.iterateCursor(t,(function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)}))}))})}));const ut="0.0.900-exp.d92a36260",lt=1e4,pt=`w:${ut}`,ft="FIS_v2",dt=36e5,ht=new l("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function mt(t){return t instanceof u&&t.code.includes("request-failed")}function gt({projectId:t}){return`https://firebaseinstallations.googleapis.com/v1/projects/${t}/installations`}function vt(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}async function yt(t,e){const n=(await e.json()).error;return ht.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function bt({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function wt(t,{refreshToken:e}){const n=bt(t);return n.append("Authorization",function(t){return`FIS_v2 ${t}`}(e)),n}async function _t(t){const e=await t();return e.status>=500&&e.status<600?t():e}function It(t){return new Promise((e=>{setTimeout(e,t)}))}const Et=/^[cdef][\w-]{21}$/;function St(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const e=function(t){return(e=t,btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var e}(t);return Et.test(e)?e:""}catch(t){return""}}function Tt(t){return`${t.appName}!${t.appId}`}const Ct=new Map;function At(t,e){const n=Tt(t);Nt(n,e),function(t,e){const n=function(){!Ot&&"BroadcastChannel"in self&&(Ot=new BroadcastChannel("[Firebase] FID Change"),Ot.onmessage=t=>{Nt(t.data.key,t.data.fid)});return Ot}();n&&n.postMessage({key:t,fid:e});0===Ct.size&&Ot&&(Ot.close(),Ot=null)}(n,e)}function Nt(t,e){const n=Ct.get(t);if(n)for(const t of n)t(e)}let Ot=null;const kt="firebase-installations-store";let Pt=null;function Dt(){return Pt||(Pt=function(t,e,n){var r=X(indexedDB,"open",[t,e]),i=r.request;return i&&(i.onupgradeneeded=function(t){n&&n(new st(i.result,t.oldVersion,i.transaction))}),r.then((function(t){return new ct(t)}))}("firebase-installations-database",1,(t=>{switch(t.oldVersion){case 0:t.createObjectStore(kt)}}))),Pt}async function Rt(t,e){const n=Tt(t),r=(await Dt()).transaction(kt,"readwrite"),i=r.objectStore(kt),o=await i.get(n);return await i.put(e,n),await r.complete,o&&o.fid===e.fid||At(t,e.fid),e}async function xt(t){const e=Tt(t),n=(await Dt()).transaction(kt,"readwrite");await n.objectStore(kt).delete(e),await n.complete}async function Lt(t,e){const n=Tt(t),r=(await Dt()).transaction(kt,"readwrite"),i=r.objectStore(kt),o=await i.get(n),a=e(o);return void 0===a?await i.delete(n):await i.put(a,n),await r.complete,!a||o&&o.fid===a.fid||At(t,a.fid),a}async function jt(t){let e;const n=await Lt(t,(n=>{const r=function(t){return Ft(t||{fid:St(),registrationStatus:0})}(n),i=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine){return{installationEntry:e,registrationPromise:Promise.reject(ht.create("app-offline"))}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:async function(t,e){try{return Rt(t,await async function(t,{fid:e}){const n=gt(t),r=bt(t),i={fid:e,authVersion:ft,appId:t.appId,sdkVersion:pt},o={method:"POST",headers:r,body:JSON.stringify(i)},a=await _t((()=>fetch(n,o)));if(a.ok){const t=await a.json();return{fid:t.fid||e,registrationStatus:2,refreshToken:t.refreshToken,authToken:vt(t.authToken)}}throw await yt("Create Installation",a)}(t,e))}catch(n){throw mt(n)&&409===n.customData.serverCode?await xt(t):await Rt(t,{fid:e.fid,registrationStatus:0}),n}}(t,n)}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Mt(t)}:{installationEntry:e}}(t,r);return e=i.registrationPromise,i.installationEntry}));return""===n.fid?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}async function Mt(t){let e=await Bt(t);for(;1===e.registrationStatus;)await It(100),e=await Bt(t);if(0===e.registrationStatus){const{installationEntry:e,registrationPromise:n}=await jt(t);return n||e}return e}function Bt(t){return Lt(t,(t=>{if(!t)throw ht.create("installation-not-found");return Ft(t)}))}function Ft(t){return 1===(e=t).registrationStatus&&e.registrationTime+lt<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}async function Ut({appConfig:t,platformLoggerProvider:e},n){const r=function(t,{fid:e}){return`${gt(t)}/${e}/authTokens:generate`}(t,n),i=wt(t,n),o=e.getImmediate({optional:!0});o&&i.append("x-firebase-client",o.getPlatformInfoString());const a={installation:{sdkVersion:pt}},s={method:"POST",headers:i,body:JSON.stringify(a)},c=await _t((()=>fetch(r,s)));if(c.ok){return vt(await c.json())}throw await yt("Generate Auth Token",c)}async function $t(t,e=!1){let n;const r=await Lt(t.appConfig,(r=>{if(!zt(r))throw ht.create("not-registered");const i=r.authToken;if(!e&&function(t){return 2===t.requestStatus&&!function(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+dt}(t)}(i))return r;if(1===i.requestStatus)return n=async function(t,e){let n=await qt(t.appConfig);for(;1===n.authToken.requestStatus;)await It(100),n=await qt(t.appConfig);const r=n.authToken;return 0===r.requestStatus?$t(t,e):r}(t,e),r;{if(!navigator.onLine)throw ht.create("app-offline");const e=function(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}(r);return n=async function(t,e){try{const n=await Ut(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Rt(t.appConfig,r),n}catch(n){if(!mt(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Rt(t.appConfig,n)}else await xt(t.appConfig);throw n}}(t,e),e}}));return n?await n:r.authToken}function qt(t){return Lt(t,(t=>{if(!zt(t))throw ht.create("not-registered");const e=t.authToken;return 1===(n=e).requestStatus&&n.requestTime+lt<Date.now()?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t;var n}))}function zt(t){return void 0!==t&&2===t.registrationStatus}async function Vt(t,e=!1){const n=t;await async function(t){const{registrationPromise:e}=await jt(t);e&&await e}(n.appConfig);return(await $t(n,e)).token}function Ht(t){return ht.create("missing-app-config-values",{valueName:t})}const Kt="installations-exp",Wt=t=>{const e=x(t.getProvider("app-exp").getImmediate(),Kt).getImmediate();return{getId:()=>async function(t){const e=t,{installationEntry:n,registrationPromise:r}=await jt(e.appConfig);return r?r.catch(console.error):$t(e).catch(console.error),n.fid}(e),getToken:t=>Vt(e,t)}};R(new d(Kt,(t=>{const e=t.getProvider("app-exp").getImmediate();return{app:e,appConfig:function(t){if(!t||!t.options)throw Ht("App Configuration");if(!t.name)throw Ht("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Ht(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:x(e,"platform-logger"),_delete:()=>Promise.resolve()}}),"PUBLIC")),R(new d("installations-exp-internal",Wt,"PRIVATE")),U("@firebase/installations-exp",ut);const Gt="0.0.900-exp.d92a36260",Jt=Gt,Yt="FB-PERF-TRACE-MEASURE",Xt="_wt_",Zt="_fcp",Qt="_fid",te="@firebase/performance/config",ee="@firebase/performance/configexpire",ne="Performance",re=new l("performance",ne,{"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"Performance can only be initialized once."}),ie=new S(ne);let oe,ae,se,ce;ie.logLevel=v.INFO;class ue{constructor(t){if(this.window=t,!t)throw re.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}getUrl(){return this.windowLocation.href.split("?")[0]}mark(t){this.performance&&this.performance.mark&&this.performance.mark(t)}measure(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)}getEntriesByType(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]}getEntriesByName(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?"indexedDB"in self&&null!=indexedDB||(ie.info("IndexedDB is not supported by current browswer"),!1):(ie.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)}setupObserver(t,e){if(!this.PerformanceObserver)return;new this.PerformanceObserver((t=>{for(const n of t.getEntries())e(n)})).observe({entryTypes:[t]})}static getInstance(){return void 0===oe&&(oe=new ue(ae)),oe}}function le(){return se}function pe(t,e){const n=t.length-e.length;if(n<0||n>1)throw re.create("invalid String merger input");const r=[];for(let n=0;n<t.length;n++)r.push(t.charAt(n)),e.length>n&&r.push(e.charAt(n));return r.join("")}class fe{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=pe("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=pe("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return void 0===ce&&(ce=new fe),ce}}var de;!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN"}(de||(de={}));const he=["firebase_","google_","ga_"],me=new RegExp("^[a-zA-Z]\\w*$");function ge(){const t=ue.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function ve(){switch(ue.getInstance().document.visibilityState){case"visible":return de.VISIBLE;case"hidden":return de.HIDDEN;default:return de.UNKNOWN}}function ye(){const t=ue.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function be(t){var e;const n=null===(e=t.options)||void 0===e?void 0:e.appId;if(!n)throw re.create("no app id");return n}const we="0.0.1",_e=!0,Ie="FIREBASE_INSTALLATIONS_AUTH";function Ee(t,e){const n=function(){const t=ue.getInstance().localStorage;if(!t)return;const e=t.getItem(ee);if(!(e&&(n=e,Number(n)>Date.now())))return;var n;const r=t.getItem(te);if(!r)return;try{return JSON.parse(r)}catch(t){return}}();return n?(Te(n),Promise.resolve()):function(t,e){return function(t){const e=t.getToken();return e.then((t=>{})),e}(t.installations).then((n=>{const r=function(t){var e;const n=null===(e=t.options)||void 0===e?void 0:e.projectId;if(!n)throw re.create("no project id");return n}(t.app),i=function(t){var e;const n=null===(e=t.options)||void 0===e?void 0:e.apiKey;if(!n)throw re.create("no api key");return n}(t.app),o=new Request(`https://firebaseremoteconfig.googleapis.com/v1/projects/${r}/namespaces/fireperf:fetch?key=${i}`,{method:"POST",headers:{Authorization:`${Ie} ${n}`},body:JSON.stringify({app_instance_id:e,app_instance_id_token:n,app_id:be(t.app),app_version:Jt,sdk_version:we})});return fetch(o).then((t=>{if(t.ok)return t.json();throw re.create("RC response not ok")}))})).catch((()=>{ie.info(Se)}))}(t,e).then(Te).then((t=>function(t){const e=ue.getInstance().localStorage;if(!t||!e)return;e.setItem(te,JSON.stringify(t)),e.setItem(ee,String(Date.now()+60*fe.getInstance().configTimeToLive*60*1e3))}(t)),(()=>{}))}const Se="Could not fetch config, will use default configs";function Te(t){if(!t)return t;const e=fe.getInstance(),n=t.entries||{};return void 0!==n.fpr_enabled?e.loggingEnabled="true"===String(n.fpr_enabled):e.loggingEnabled=_e,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=Ce(e.tracesSamplingRate),e.logNetworkAfterSampling=Ce(e.networkRequestsSamplingRate),t}function Ce(t){return Math.random()<=t}let Ae,Ne=1;function Oe(t){return Ne=2,Ae=Ae||function(t){return function(){const t=ue.getInstance().document;return new Promise((e=>{if(t&&"complete"!==t.readyState){const n=()=>{"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()}))}().then((()=>function(t){const e=t.getId();return e.then((t=>{se=t})),e}(t.installations))).then((e=>Ee(t,e))).then((()=>ke()),(()=>ke()))}(t),Ae}function ke(){Ne=3}const Pe=1e4;let De,Re=3,xe=[],Le=!1;function je(t){setTimeout((()=>{if(0!==Re)return xe.length?void function(){const t=xe.splice(0,1e3),e=t.map((t=>({source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)})));(function(t,e){return function(t){const e=fe.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(t).then((t=>(t.ok||ie.info("Call to Firebase backend failed."),t.json()))).then((t=>{const n=Number(t.nextRequestWaitMillis);let r=Pe;isNaN(n)||(r=Math.max(n,r));const i=t.logResponseDetails;Array.isArray(i)&&i.length>0&&"RETRY_REQUEST_LATER"===i[0].responseAction&&(xe=[...e,...xe],ie.info("Retry transport request later.")),Re=3,je(r)}))})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:fe.getInstance().logSource,log_event:e},t).catch((()=>{xe=[...t,...xe],Re--,ie.info(`Tries left: ${Re}.`),je(Pe)}))}():je(Pe)}),t)}function Me(t){return(...e)=>{!function(t){if(!t.eventTime||!t.message)throw re.create("invalid cc log");xe=[...xe,t]}({message:t(...e),eventTime:Date.now()})}}function Be(t,e){De||(De=Me($e)),De(t,e)}function Fe(t){const e=fe.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&ue.getInstance().requiredApisAvailable()&&(t.isAuto&&ve()!==de.VISIBLE||(3===Ne?Ue(t):Oe(t.performanceController).then((()=>Ue(t)),(()=>Ue(t)))))}function Ue(t){if(!le())return;const e=fe.getInstance();e.loggingEnabled&&e.logTraceAfterSampling&&setTimeout((()=>Be(t,1)),0)}function $e(t,e){return 0===e?function(t){const e={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs},n={application_info:qe(t.performanceController.app),network_request_metric:e};return JSON.stringify(n)}(t):function(t){const e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);const n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);const r={application_info:qe(t.performanceController.app),trace_metric:e};return JSON.stringify(r)}(t)}function qe(t){return{google_app_id:be(t),app_instance_id:le(),web_app_info:{sdk_version:Jt,page_url:ue.getInstance().getUrl(),service_worker_status:ge(),visibility_state:ve(),effective_connection_type:ye()},application_process_state:0}}const ze=["_fp",Zt,Qt];class Ve{constructor(t,e,n=!1,r){this.performanceController=t,this.name=e,this.isAuto=n,this.state=1,this.customAttributes={},this.counters={},this.api=ue.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark=`FB-PERF-TRACE-START-${this.randomId}-${this.name}`,this.traceStopMark=`FB-PERF-TRACE-STOP-${this.randomId}-${this.name}`,this.traceMeasure=r||`FB-PERF-TRACE-MEASURE-${this.randomId}-${this.name}`,r&&this.calculateTraceMetrics())}start(){if(1!==this.state)throw re.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(2!==this.state)throw re.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Fe(this)}record(t,e,n){if(t<=0)throw re.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw re.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=Object.assign({},n.attributes)),n&&n.metrics)for(const t of Object.keys(n.metrics))isNaN(Number(n.metrics[t]))||(this.counters[t]=Number(Math.floor(n.metrics[t])));Fe(this)}incrementMetric(t,e=1){void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)}putMetric(t,e){if(!function(t,e){return!(0===t.length||t.length>100)&&(e&&e.startsWith(Xt)&&ze.indexOf(t)>-1||!t.startsWith("_"))}(t,this.name))throw re.create("invalid custom metric name",{customMetricName:t});this.counters[t]=function(t){const e=Math.floor(t);return e<t&&ie.info(`Metric value should be an Integer, setting the value as : ${e}.`),e}(e)}getMetric(t){return this.counters[t]||0}putAttribute(t,e){const n=function(t){return!(0===t.length||t.length>40)&&(!he.some((e=>t.startsWith(e)))&&!!t.match(me))}(t),r=function(t){return 0!==t.length&&t.length<=100}(e);if(n&&r)this.customAttributes[t]=e;else{if(!n)throw re.create("invalid attribute name",{attributeName:t});if(!r)throw re.create("invalid attribute value",{attributeValue:e})}}getAttribute(t){return this.customAttributes[t]}removeAttribute(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(t){this.startTimeUs=t}setDuration(t){this.durationUs=t}calculateTraceMetrics(){const t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))}static createOobTrace(t,e,n,r){const i=ue.getInstance().getUrl();if(!i)return;const o=new Ve(t,Xt+i,!0),a=Math.floor(1e3*ue.getInstance().getTimeOrigin());o.setStartTime(a),e&&e[0]&&(o.setDuration(Math.floor(1e3*e[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd)));if(n){const t=n.find((t=>"first-paint"===t.name));t&&t.startTime&&o.putMetric("_fp",Math.floor(1e3*t.startTime));const e=n.find((t=>"first-contentful-paint"===t.name));e&&e.startTime&&o.putMetric(Zt,Math.floor(1e3*e.startTime)),r&&o.putMetric(Qt,Math.floor(1e3*r))}Fe(o)}static createUserTimingTrace(t,e){Fe(new Ve(t,e,!1,e))}}function He(t,e){const n=e;if(!n||void 0===n.responseStart)return;const r=ue.getInstance().getTimeOrigin(),i=Math.floor(1e3*(n.startTime+r)),o=n.responseStart?Math.floor(1e3*(n.responseStart-n.startTime)):void 0,a=Math.floor(1e3*(n.responseEnd-n.startTime));!function(t){const e=fe.getInstance();if(!e.instrumentationEnabled)return;const n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout((()=>Be(t,0)),0)}({performanceController:t,url:n.name&&n.name.split("?")[0],responsePayloadBytes:n.transferSize,startTimeUs:i,timeToResponseInitiatedUs:o,timeToResponseCompletedUs:a})}function Ke(t){le()&&(setTimeout((()=>function(t){const e=ue.getInstance(),n=e.getEntriesByType("navigation"),r=e.getEntriesByType("paint");if(e.onFirstInputDelay){let i=setTimeout((()=>{Ve.createOobTrace(t,n,r),i=void 0}),5e3);e.onFirstInputDelay((e=>{i&&(clearTimeout(i),Ve.createOobTrace(t,n,r,e))}))}else Ve.createOobTrace(t,n,r)}(t)),0),setTimeout((()=>function(t){const e=ue.getInstance(),n=e.getEntriesByType("resource");for(const e of n)He(t,e);e.setupObserver("resource",(e=>He(t,e)))}(t)),0),setTimeout((()=>function(t){const e=ue.getInstance(),n=e.getEntriesByType("measure");for(const e of n)We(t,e);e.setupObserver("measure",(e=>We(t,e)))}(t)),0))}function We(t,e){const n=e.name;n.substring(0,Yt.length)!==Yt&&Ve.createUserTimingTrace(t,n)}class Ge{constructor(t,e){this.app=t,this.installations=e,this.initialized=!1}_init(t){this.initialized||(void 0!==(null==t?void 0:t.dataCollectionEnabled)&&(this.dataCollectionEnabled=t.dataCollectionEnabled),void 0!==(null==t?void 0:t.instrumentationEnabled)&&(this.instrumentationEnabled=t.instrumentationEnabled),ue.getInstance().requiredApisAvailable()?new Promise((function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}})).then((t=>{t&&(Le||(je(5500),Le=!0),Oe(this).then((()=>Ke(this)),(()=>Ke(this))),this.initialized=!0)})).catch((t=>{ie.info(`Environment doesn't support IndexedDB: ${t}`)})):ie.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(t){fe.getInstance().instrumentationEnabled=t}get instrumentationEnabled(){return fe.getInstance().instrumentationEnabled}set dataCollectionEnabled(t){fe.getInstance().dataCollectionEnabled=t}get dataCollectionEnabled(){return fe.getInstance().dataCollectionEnabled}}R(new d("performance-exp",((t,{options:e})=>{const n=t.getProvider("app-exp").getImmediate(),r=t.getProvider("installations-exp-internal").getImmediate();if("[DEFAULT]"!==n.name)throw re.create("FB not default");if("undefined"==typeof window)throw re.create("no window");!function(t){ae=t}(window);const i=new Ge(n,r);return i._init(e),i}),"PUBLIC")),U("@firebase/performance-exp",Gt);class Je{constructor(t,e){this.app=t,this._delegate=e}get instrumentationEnabled(){return this._delegate.instrumentationEnabled}set instrumentationEnabled(t){this._delegate.instrumentationEnabled=t}get dataCollectionEnabled(){return this._delegate.dataCollectionEnabled}set dataCollectionEnabled(t){this._delegate.dataCollectionEnabled=t}trace(t){return function(t,e){var n;return t=(n=t)&&n._delegate?n._delegate:n,new Ve(t,e)}(this._delegate,t)}}function Ye(t){const e=t.getProvider("app-compat").getImmediate(),n=t.getProvider("performance-exp").getImmediate();return new Je(e,n)}var Xe;(Xe=G).INTERNAL.registerComponent(new d("performance-compat",Ye,"PUBLIC")),Xe.registerVersion("@firebase/performance-compat","0.0.900-exp.d92a36260");return G.registerVersion("firebase-exp","9.0.0-beta.2","compat-lite"),G}));
//# sourceMappingURL=firebase-performance-standalone-compat.js.map
